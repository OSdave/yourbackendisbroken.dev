#!/bin/bash

LAST_STEP=`git tag -l | grep step- | sort | tail -n 1`
CURRENT_STEP=`git describe --tags`

if [ $CURRENT_STEP == $LAST_STEP ]; then
  echo "You are already at the end of this tutorial ;-)"
  echo "If you feel like starting it again, run bin/start"
  exit
fi

NEXT_STEP_NUMBER=$((`echo $CURRENT_STEP | cut -d'-' -f2` + 1))

git reset --hard HEAD 2>&1 > /dev/null
git checkout step-$NEXT_STEP_NUMBER
